<ul class="overflow-y-auto flex-1 p-2">
  @for (conversation of conversationList(); track conversation.conversationId) {
    <li (click)="selectedConversation(conversation)"
        class="flex items-center p-2 rounded-md mb-1 cursor-pointer transition-all duration-200 border-l-4"
        [ngClass]="{
          'bg-primary-50 border-primary-500': conversation.active,
          'border-transparent hover:bg-gray-100': !conversation.active
        }">
      <img [src]="conversation.avatarUrl" [alt]="'Avatar for conversation: ' + conversation.name" class="w-8 h-8 rounded-md mr-3">
      <div class="flex-1 overflow-hidden">
        <div class="flex flex-col">
          <div class="flex items-center justify-between">
            <span class="text-sm font-medium truncate"
                  [ngClass]="{'text-primary-700': conversation.active, 'text-gray-800': !conversation.active}">
              {{ conversation.name }}
            </span>
          </div>
          <span class="text-xs text-gray-500">

            @if(conversation.lastMessageSenderId === user().id) {
              You:
            }
            {{ conversation.lastMessageContent }}
            <span class="mx-1">&middot;</span>
            {{ conversation.lastMessageTimestamp | relativeTime }}
          </span>
        </div>
      </div>
      <mg-button-remove (click)="removedConversation(conversation)" class="ml-2"/>
    </li>
  }
</ul>

<div class="px-2 mt-2">
  <mg-button (click)="addNewConversation()" buttonText="Add New Conversation">
    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
         xmlns="http://www.w3.org/2000/svg">
      <path d="M12 4v16m8-8H4" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
    </svg>
  </mg-button>
</div>
