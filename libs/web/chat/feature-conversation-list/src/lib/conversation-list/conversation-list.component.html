<ul class="overflow-y-auto flex-1 p-2">
  @for (conversation of conversationList(); track conversation.conversationId) {
    <li (click)="conversationClicked(conversation)"
        class="flex items-center p-2 rounded-md mb-1 cursor-pointer transition-all duration-200 border-l-4"
        [ngClass]="{
          'bg-primary-50 border-primary-500': conversation | isActive,
          'border-transparent hover:bg-gray-100': !(conversation | isActive)
        }">
      <img [src]="conversation.avatarUrl" [alt]="'Avatar for conversation: ' + conversation.name" class="w-8 h-8 rounded-md mr-3">
      <div class="flex-1 overflow-hidden">
        <div class="flex flex-col">
          <div class="flex items-center justify-between">
            <span class="text-sm font-medium truncate"
                  [ngClass]="{'text-primary-700': conversation | isActive, 'text-gray-800': !(conversation | isActive)}">
              {{ conversation.name }}
            </span>
          </div>
          <span class="text-xs text-gray-500">

<!--            <pre>-->
<!--              <code>-->
<!--                {{ conversation | json }}-->
<!--              </code>-->
<!--            </pre>-->

            @if(conversation.lastMessageSenderId === user().id) {
              You:
            }
            {{ conversation.lastMessageContent }}
            <span class="mx-1">&middot;</span>
            {{ conversation.lastMessageTimestamp | relativeTime }}
          </span>
        </div>
      </div>
      <mg-button-remove (click)="removedConversation(conversation)" class="ml-2"/>
    </li>
  }
</ul>
