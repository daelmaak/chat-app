<div
  [ngClass]="{'justify-end': message.senderId === currentUserId, 'justify-start': message.senderId !== currentUserId}"
  class="flex items-end space-x-2">
  @if (message.senderId !== currentUserId) {
    <img [src]="message.senderId | userDetail : 'avatarUrl'"
         [alt]="'Avatar of user with id: ' + (message.senderId | userDetail : 'name' )"
         class="w-8 h-8 rounded-full object-cover">
  }
  <div [ngClass]="{
             'bg-primary-50 text-gray-800': message.senderId === currentUserId,
             'bg-white text-gray-800': message.senderId !== currentUserId,
             'order-1': message.senderId === currentUserId
           }"
       class="max-w-xs p-3 rounded-lg shadow-sm relative">
    <p>{{ message.content }}</p>
    <div class="flex justify-between items-center mt-1">
      <p class="text-xs text-gray-500">
        {{ message.createdAt | date:'short' }}
      </p>
      @if (message.senderId === currentUserId) {
        <span class="text-xs text-gray-500 ml-2">
          @switch (message.status) {
            @case ('sending') {
              <span class="text-blue-500">✓</span>
            }
            @case ('sent') {
              <span class="text-blue-500">✓✓</span>
            }
            @case ('read') {
              <span class="text-green-500">✓✓</span>
            }
            @default {
<!--              <span class="text-gray-400">⋯</span>-->
            }
          }
        </span>
      }
    </div>
  </div>

  @if (message.senderId === currentUserId) {
    <div class="w-8"></div>
  }
</div>
